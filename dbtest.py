import mysql.connector
import bcrypt

mydb = mysql.connector.connect(
host="34.253.208.70",
  user="root",
password="my_secret_password",
database="userinfotest"
)

mycursor = mydb.cursor()
sql = "INSERT INTO userinfo (username) VALUES (%s)"
username='admin'
# mycursor.execute(sql, username)
mycursor.execute(f"INSERT INTO userinfo (username) VALUES ('{username}');")
mydb.commit()
newpass = "root"
hashed = bcrypt.hashpw(newpass.encode("utf-8"),bcrypt.gensalt())
mycursor.execute(f"UPDATE userinfo SET password=%s, changepass=0, isadmin=1 WHERE username = '{username}'", (hashed,))
#mycursor.execute("CREATE DATABASE userinfotest")
#mycursor.execute("CREATE TABLE userinfo (id INT AUTO_INCREMENT PRIMARY KEY, fname VARCHAR(255), sname VARCHAR(255), username VARCHAR(255) UNIQUE, password VARCHAR(255), datemonthbirth VARCHAR(255), monthdatebirth VARCHAR(255), yearofbirth VARCHAR(255), monthbirth VARCHAR(255), changepass BOOL)")
#mycursor.execute("CREATE TABLE userinfo (id INT AUTO_INCREMENT PRIMARY KEY, fname VARCHAR(255), sname VARCHAR(255), username VARCHAR(255) UNIQUE, password VARCHAR(64), datemonthbirth VARCHAR(255), monthdatebirth VARCHAR(255), yearofbirth VARCHAR(255), monthbirth VARCHAR(255), changepass BOOL, isadmin BOOL)")
#mycursor.execute("UPDATE userinfo SET changepass = 0 WHERE fname = 'george'")
#mycursor.execute("DROP TABLE userinfo")
mydb.commit()
