# @component TerraformAWS:VPC:NACl_App:Subnet_App (#subnet_app)
# App Subnet
resource "aws_subnet" "cyber94_vulnerability_scanner_subnet_app_tf"{
  vpc_id = var.var_aws_vpc_id
  cidr_block = "10.118.1.0/24"

  tags = {
    Name = "cyber94_vulnerability_scanner_subnet_app"
  }
}

# @connects #rt to #subnet_app with link
# @connects #subnet_app to #rt with link
# App Route Table Association
resource "aws_route_table_association" "cyber94_vulnerability_scanner_rt_assoc_app_tf" {
    subnet_id = aws_subnet.cyber94_vulnerability_scanner_subnet_app_tf.id
    route_table_id = var.var_internet_rt
}

# @component TerraformAWS:VPC:NACl_App (#nacl_app)
# @connects #nacl_app to #subnet_app with HTTP,HTTPs
# @connects #subnet_app to #nacl_app with HTTP,HTTPs
# @connects #nacl_app to #nacl_db with SQL_Querry
# @connects #nacl_db to #nacl_app with SQL_Response
# App Network Access Control List
resource "aws_network_acl" "cyber94_vulnerability_scanner_ncal_app_tf"{
  vpc_id = var.var_aws_vpc_id

  egress {
       protocol   = "-1"
       rule_no    = 100
       action     = "allow"
       cidr_block = "0.0.0.0/0"
       from_port  = 0
       to_port    = 0
     }

  ingress {
      protocol   = "-1"
      rule_no    = 100
      action     = "allow"
      cidr_block = "0.0.0.0/0"
      from_port  = 0
      to_port    = 0
    }

  subnet_ids = [aws_subnet.cyber94_vulnerability_scanner_subnet_app_tf.id]

  tags = {
    Name = "cyber94_vulnerability_scanner_ncal_app"
  }
}
